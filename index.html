<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒê·ªÅ Thi Th·ª≠ THPT - L·ªãch S·ª≠ - S·ªë 31</title>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #c0392b;
    --red-light: #e74c3c;
    --gold: #d4a017;
    --dark: #1a1a2e;
    --dark2: #16213e;
    --mid: #0f3460;
    --light-bg: #f5f0e8;
    --card-bg: #fffdf8;
    --border: #d4c5a9;
    --text: #2c2c2c;
    --muted: #7a7a7a;
    --success: #27ae60;
    --error: #c0392b;
    --warning: #e67e22;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Source Sans 3', sans-serif;
    background: var(--light-bg);
    color: var(--text);
    min-height: 100vh;
  }

  /* HEADER */
  .exam-header {
    background: linear-gradient(135deg, var(--dark) 0%, var(--mid) 100%);
    color: white;
    padding: 24px 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 4px solid var(--gold);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }

  .exam-header-left h1 {
    font-family: 'Merriweather', serif;
    font-size: 1.1rem;
    color: var(--gold);
    letter-spacing: 1px;
  }

  .exam-header-left p {
    font-size: 0.85rem;
    color: rgba(255,255,255,0.7);
    margin-top: 4px;
  }

  /* TIMER */
  .timer-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    padding: 12px 20px;
    min-width: 140px;
  }

  .timer-label {
    font-size: 0.7rem;
    color: rgba(255,255,255,0.6);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 4px;
  }

  .timer-display {
    font-family: 'Merriweather', serif;
    font-size: 2rem;
    font-weight: 700;
    color: white;
    letter-spacing: 3px;
    transition: color 0.3s;
  }

  .timer-display.warning { color: var(--warning); animation: pulse 1s infinite; }
  .timer-display.danger { color: var(--red-light); animation: pulse 0.5s infinite; }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  /* PROGRESS BAR */
  .progress-bar-wrap {
    background: rgba(255,255,255,0.15);
    height: 4px;
    position: sticky;
    top: 90px;
    z-index: 99;
  }
  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--red-light));
    transition: width 0.4s ease;
  }

  /* MAIN */
  .main {
    max-width: 900px;
    margin: 0 auto;
    padding: 32px 20px 80px;
  }

  /* SECTION TITLE */
  .section-title {
    font-family: 'Merriweather', serif;
    font-size: 1rem;
    color: white;
    background: var(--mid);
    padding: 10px 20px;
    border-radius: 8px 8px 0 0;
    border-left: 5px solid var(--gold);
    margin-top: 32px;
    margin-bottom: 0;
  }

  .section-desc {
    background: #eef2f8;
    border: 1px solid #c9d8ee;
    border-top: none;
    padding: 10px 20px;
    font-size: 0.9rem;
    color: #2c4a7a;
    margin-bottom: 16px;
    border-radius: 0 0 8px 8px;
  }

  /* QUESTION CARD */
  .question-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    transition: box-shadow 0.2s;
  }

  .question-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.1); }

  .question-num {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
  }

  .question-text {
    font-size: 0.97rem;
    line-height: 1.7;
    color: var(--text);
    margin-bottom: 16px;
    font-weight: 600;
  }

  /* PASSAGE */
  .passage-box {
    background: #fff8e7;
    border: 1px solid #e8d5a3;
    border-left: 4px solid var(--gold);
    border-radius: 8px;
    padding: 16px 20px;
    margin-bottom: 20px;
    font-size: 0.9rem;
    line-height: 1.8;
    color: #4a3a0d;
    font-style: italic;
  }

  .passage-source {
    font-size: 0.8rem;
    color: var(--muted);
    text-align: right;
    margin-top: 8px;
    font-style: normal;
  }

  /* OPTIONS */
  .options { display: flex; flex-direction: column; gap: 10px; }

  .option-label {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    background: white;
    font-size: 0.93rem;
  }

  .option-label:hover {
    border-color: var(--mid);
    background: #eef4ff;
  }

  .option-label input[type="radio"] { display: none; }

  .option-dot {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid #bbb;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 0.7rem;
    font-weight: 700;
    color: #999;
    transition: all 0.2s;
  }

  .option-label.selected {
    border-color: var(--mid);
    background: #ddeeff;
  }

  .option-label.selected .option-dot {
    background: var(--mid);
    border-color: var(--mid);
    color: white;
  }

  /* AFTER SUBMIT - correct/wrong */
  .option-label.correct {
    border-color: var(--success) !important;
    background: #eafaf1 !important;
  }
  .option-label.correct .option-dot {
    background: var(--success) !important;
    border-color: var(--success) !important;
    color: white !important;
  }
  .option-label.wrong {
    border-color: var(--error) !important;
    background: #fdf0f0 !important;
  }
  .option-label.wrong .option-dot {
    background: var(--error) !important;
    border-color: var(--error) !important;
    color: white !important;
  }

  /* PART 2 - True/False */
  .tf-grid { display: flex; flex-direction: column; gap: 12px; }

  .tf-item {
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 16px;
    background: white;
  }

  .tf-item-label {
    font-size: 0.93rem;
    line-height: 1.7;
    margin-bottom: 10px;
    color: var(--text);
  }

  .tf-item-label strong { color: var(--mid); }

  .tf-buttons { display: flex; gap: 10px; }

  .tf-btn {
    padding: 6px 20px;
    border-radius: 6px;
    border: 2px solid var(--border);
    background: white;
    cursor: pointer;
    font-size: 0.87rem;
    font-weight: 600;
    transition: all 0.2s;
    color: var(--text);
  }

  .tf-btn:hover { border-color: var(--mid); }
  .tf-btn.selected-true { border-color: var(--success); background: #eafaf1; color: var(--success); }
  .tf-btn.selected-false { border-color: var(--error); background: #fdf0f0; color: var(--error); }

  /* After submit TF */
  .tf-btn.correct-true { border-color: var(--success) !important; background: #eafaf1 !important; color: var(--success) !important; font-weight: 700; }
  .tf-btn.wrong-true { border-color: var(--error) !important; background: #fdf0f0 !important; color: var(--error) !important; }
  .tf-btn.correct-false { border-color: var(--success) !important; background: #eafaf1 !important; color: var(--success) !important; font-weight: 700; }
  .tf-btn.wrong-false { border-color: var(--error) !important; background: #fdf0f0 !important; color: var(--error) !important; }

  /* SUBMIT AREA */
  .submit-area {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    border-top: 2px solid var(--border);
    padding: 16px 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
    z-index: 100;
  }

  .answered-count {
    font-size: 0.9rem;
    color: var(--muted);
  }

  .answered-count span {
    font-weight: 700;
    color: var(--mid);
    font-size: 1.1rem;
  }

  .btn-submit {
    background: linear-gradient(135deg, var(--red), var(--red-light));
    color: white;
    border: none;
    padding: 12px 36px;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    letter-spacing: 0.5px;
    transition: all 0.2s;
    box-shadow: 0 4px 15px rgba(192,57,43,0.3);
  }

  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(192,57,43,0.4);
  }

  .btn-submit:disabled {
    background: #aaa;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* MODAL */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
  }
  .modal-overlay.show { display: flex; }

  .modal {
    background: white;
    border-radius: 20px;
    padding: 40px;
    max-width: 500px;
    width: 90%;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    animation: modalIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes modalIn {
    from { transform: scale(0.7); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .modal-icon {
    font-size: 4rem;
    margin-bottom: 16px;
    display: block;
  }

  .modal h2 {
    font-family: 'Merriweather', serif;
    font-size: 1.4rem;
    color: var(--dark);
    margin-bottom: 8px;
  }

  .modal .score-big {
    font-size: 3.5rem;
    font-weight: 700;
    color: var(--mid);
    margin: 16px 0;
    font-family: 'Merriweather', serif;
  }

  .modal .score-detail {
    font-size: 0.9rem;
    color: var(--muted);
    margin-bottom: 8px;
    line-height: 1.6;
  }

  .modal-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin-top: 24px;
    flex-wrap: wrap;
  }

  .btn-retry {
    padding: 10px 28px;
    border-radius: 8px;
    border: 2px solid var(--mid);
    background: white;
    color: var(--mid);
    font-weight: 700;
    cursor: pointer;
    font-size: 0.95rem;
    transition: all 0.2s;
  }
  .btn-retry:hover { background: var(--mid); color: white; }

  .btn-review {
    padding: 10px 28px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(135deg, var(--mid), var(--dark));
    color: white;
    font-weight: 700;
    cursor: pointer;
    font-size: 0.95rem;
    transition: all 0.2s;
  }
  .btn-review:hover { opacity: 0.85; }

  /* SCORE ROW */
  .score-row {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin: 12px 0;
  }
  .score-box {
    background: var(--light-bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 16px;
    min-width: 100px;
  }
  .score-box .sb-label { font-size: 0.75rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; }
  .score-box .sb-val { font-size: 1.4rem; font-weight: 700; color: var(--dark); margin-top: 2px; }

  /* RESULT BADGE */
  .result-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    margin-left: 8px;
  }
  .badge-correct { background: #eafaf1; color: var(--success); border: 1px solid var(--success); }
  .badge-wrong { background: #fdf0f0; color: var(--error); border: 1px solid var(--error); }

  /* EXPLANATION */
  .explanation {
    margin-top: 12px;
    padding: 10px 14px;
    background: #f0f8ff;
    border-left: 3px solid var(--mid);
    border-radius: 6px;
    font-size: 0.87rem;
    color: #2c4a7a;
    display: none;
  }
  .explanation.show { display: block; }

  /* CONFIRM MODAL */
  .confirm-modal .modal-actions { margin-top: 16px; }
  .btn-cancel { padding: 10px 28px; border-radius: 8px; border: 2px solid #ccc; background: white; color: #555; font-weight: 700; cursor: pointer; font-size: 0.95rem; }
  .btn-confirm { padding: 10px 28px; border-radius: 8px; border: none; background: var(--red); color: white; font-weight: 700; cursor: pointer; font-size: 0.95rem; }

  /* SHUFFLE INDICATOR */
  .shuffle-note { font-size: 0.8rem; color: var(--muted); background: #eef; border-radius: 6px; padding: 6px 12px; margin-bottom: 12px; display: inline-block; }

  @media (max-width: 600px) {
    .exam-header { flex-direction: column; gap: 12px; padding: 16px; }
    .main { padding: 20px 12px 80px; }
    .score-row { flex-wrap: wrap; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header class="exam-header">
  <div class="exam-header-left">
    <h1>ƒê·ªÄ THI TH·ª¨ THPT ‚Äì S·ªê 31</h1>
    <p>M√¥n L·ªãch S·ª≠ &nbsp;|&nbsp; Th·ªùi gian: 50 ph√∫t</p>
  </div>
  <div class="timer-wrap">
    <div class="timer-label">Th·ªùi gian c√≤n l·∫°i</div>
    <div class="timer-display" id="timerDisplay">45:00</div>
  </div>
</header>

<!-- PROGRESS -->
<div class="progress-bar-wrap">
  <div class="progress-bar" id="progressBar" style="width:0%"></div>
</div>

<!-- MAIN CONTENT -->
<main class="main" id="examMain">
  <div id="examContent"></div>
</main>

<!-- SUBMIT AREA -->
<div class="submit-area" id="submitArea">
  <div class="answered-count">ƒê√£ tr·∫£ l·ªùi: <span id="answeredCount">0</span> / <span id="totalQ">28</span> c√¢u</div>
  <button class="btn-submit" id="btnSubmit" onclick="confirmSubmit()">üì© N·ªôp B√†i</button>
</div>

<!-- CONFIRM MODAL -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal confirm-modal">
    <span class="modal-icon">‚ö†Ô∏è</span>
    <h2>X√°c nh·∫≠n n·ªôp b√†i</h2>
    <p class="score-detail" id="confirmMsg"></p>
    <div class="modal-actions">
      <button class="btn-cancel" onclick="closeConfirm()">L√†m ti·∫øp</button>
      <button class="btn-confirm" onclick="doSubmit()">N·ªôp b√†i ngay</button>
    </div>
  </div>
</div>

<!-- RESULT MODAL -->
<div class="modal-overlay" id="resultModal">
  <div class="modal">
    <span class="modal-icon" id="resultIcon">üéâ</span>
    <h2 id="resultTitle">K·∫øt qu·∫£ b√†i thi</h2>
    <div class="score-big" id="scoreBig">0.0</div>
    <div class="score-row" id="scoreRow"></div>
    <p class="score-detail" id="scoreDetail"></p>
    <div class="modal-actions">
      <button class="btn-retry" onclick="retryExam()">üîÑ L√†m l·∫°i</button>
      <button class="btn-review" onclick="reviewAnswers()">üìã Xem ƒë√°p √°n</button>
    </div>
  </div>
</div>

<script>
// ============================================================
// DATA
// ============================================================
const PART1_DATA = [
  {
    id: 'p1q1',
    text: 'C√¢u 1: H·ªì Qu√Ω Ly ƒë√£ th·ª±c hi·ªán ch√≠nh s√°ch n√†o sau ƒë√¢y nh·∫±m h·∫°n ch·∫ø s·ª± ph√°t tri·ªÉn c·ªßa ch·∫ø ƒë·ªô s·ªü h·ªØu ru·ªông ƒë·∫•t l·ªõn trong c√°c ƒëi·ªÅn trang, th√°i ·∫•p c·ªßa qu√Ω t·ªôc nh√† Tr·∫ßn?',
    options: ['A. Ph√°t h√†nh ti·ªÅn gi·∫•y.', 'B. Ch√≠nh s√°ch h·∫°n ƒëi·ªÅn.', 'C. Ch√≠nh s√°ch ƒë·ªìn ƒëi·ªÅn.', 'D. Th·ªëng nh·∫•t ƒëo l∆∞·ªùng.'],
    answer: 1
  },
  {
    id: 'p1q2',
    text: 'C√¢u 2: N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng ho·∫°t ƒë·ªông x√°c l·∫≠p, th·ª±c thi ch·ªß quy·ªÅn c·ªßa nh√† Nguy·ªÖn ƒë·ªëi v·ªõi qu·∫ßn ƒë·∫£o Ho√†ng Sa, qu·∫ßn ƒë·∫£o Tr∆∞·ªùng Sa?',
    options: ['A. L·∫≠p ra c√°c ƒë·ªôi Ho√†ng Sa, B·∫Øc H·∫£i.', 'B. X√¢y d·ª±ng c√°c cƒÉn c·ª© h·∫£i qu√¢n l·ªõn.', 'C. Tuy√™n b·ªë ch·ªß quy·ªÅn v·ªõi nh√† Thanh.', 'D. Di d√¢n ra sinh s·ªëng tr√™n c√°c ƒë·∫£o l·ªõn.'],
    answer: 0
  },
  {
    id: 'p1q3',
    text: 'C√¢u 3: N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng n·ªôi dung c·ªßa ch·∫ø ƒë·ªô "h·ªìi t·ªµ" ƒë∆∞·ª£c th·ª±c hi·ªán trong cu·ªôc c·∫£i c√°ch h√†nh ch√≠nh c·ªßa vua Minh M·∫°ng (n·ª≠a ƒë·∫ßu th·∫ø k·ªâ XIX)?',
    options: ['A. Anh, em, cha, con, th·∫ßy, tr√≤ kh√¥ng ƒë∆∞·ª£c l√†m quan c√πng m·ªôt ch·ªó.', 'B. C√°c ƒë·ªãa ph∆∞∆°ng kh√¥ng ƒë∆∞·ª£c tuy·ªÉn ch·ªçn quan l·∫°i t·∫°i ch·ªó, vƒ©nh vi·ªÖn.', 'C. Ng∆∞·ªùi th√¢n, t√¥n th·∫•t, d√≤ng h·ªç c·ªßa ho√†ng h·∫≠u kh√¥ng ƒë∆∞·ª£c l√†m quan.', 'D. Ng∆∞·ªùi ƒë·ªó ƒë·∫°t trong c√πng m·ªôt khoa thi kh√¥ng ƒë∆∞·ª£c l√†m quan m·ªôt n∆°i.'],
    answer: 0
  },
  {
    id: 'p1q4',
    text: 'C√¢u 4: N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng v·ªÅ t·∫ßm quan tr·ªçng c·ªßa Bi·ªÉn ƒê√¥ng ƒë·ªëi v·ªõi Vi·ªát Nam trong lƒ©nh v·ª±c an ninh qu·ªëc ph√≤ng?',
    options: ['A. L√† tuy·∫øn ph√≤ng th·ªß t·ª´ ph√≠a ƒë√¥ng c·ªßa ƒë·∫•t n∆∞·ªõc.', 'B. Ki·ªÉm so√°t con ƒë∆∞·ªùng bu√¥n b√°n l·ªõn nh·∫•t th·∫ø gi·ªõi.', 'C. Kh·ªëng ch·∫ø khu v·ª±c ch√¢u √Å - Th√°i B√¨nh D∆∞∆°ng.', 'D. L√† khu v·ª±c c√≥ tr·ªØ l∆∞·ª£ng th·ªßy h·∫£i s·∫£n phong ph√∫.'],
    answer: 0
  },
  {
    id: 'p1q5',
    text: 'C√¢u 5: C∆° quan n√†o c·ªßa Li√™n h·ª£p qu·ªëc ch·ªãu tr√°ch nhi·ªám ch√≠nh trong vi·ªác x√©t x·ª≠ c√°c tranh ch·∫•p, xung ƒë·ªôt tr√™n th·∫ø gi·ªõi?',
    options: ['A. ƒê·∫°i h·ªôi ƒë·ªìng.', 'B. Ban th∆∞ k√Ω.', 'C. T√≤a √°n qu·ªëc t·∫ø.', 'D. H·ªôi ƒë·ªìng b·∫£o an.'],
    answer: 2
  },
  {
    id: 'p1q6',
    text: 'C√¢u 6: Khu v·ª±c n√†o sau ƒë√¢y kh√¥ng thu·ªôc ph·∫°m vi ƒë√≥ng qu√¢n gi·∫£i gi√°p qu√¢n ƒë·ªôi ph√°t x√≠t c·ªßa Li√™n X√¥ ƒë∆∞·ª£c quy·∫øt ƒë·ªãnh trong h·ªôi ngh·ªã Ianta (2/1945)?',
    options: ['A. ƒê√¥ng √Çu.', 'B. T√¢y √Çu.', 'C. ƒê√¥ng ƒê·ª©c.', 'D. B·∫Øc Tri·ªÅu Ti√™n.'],
    answer: 1
  },
  {
    id: 'p1q7',
    text: 'C√¢u 7: N·ªôi dung n√†o sau ƒë√¢y kh√¥ng ph·∫£i l√† l√≠ do th√†nh l·∫≠p c·ªßa t·ªï ch·ª©c Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å (ASEAN)?',
    options: ['A. ·∫¢nh h∆∞·ªüng c·ªßa Trung Qu·ªëc ·ªü khu v·ª±c Bi·ªÉn ƒê√¥ng.', 'B. Nhu c·∫ßu li√™n k·∫øt, h·ª£p t√°c c√πng nhau ph√°t tri·ªÉn.', 'C. H·∫°n ch·∫ø ·∫£nh h∆∞·ªüng c·ªßa c√°c c∆∞·ªùng qu·ªëc b√™n ngo√†i.', 'D. T√°c ƒë·ªông c·ªßa cu·ªôc c√°ch m·∫°ng khoa h·ªçc ‚Äì kƒ© thu·∫≠t.'],
    answer: 0
  },
  {
    id: 'p1q8',
    text: 'C√¢u 8: Qu√° tr√¨nh m·ªü r·ªông th√†nh vi√™n c·ªßa ASEAN di·ªÖn ra l√¢u d√†i v√† ƒë·∫ßy tr·ªü ng·∫°i l√† do m·ªôt trong nh·ªØng nguy√™n nh√¢n n√†o sau ƒë√¢y?',
    options: ['A. Nh·ªØng t√°c ƒë·ªông c·ªßa c·ª•c di·ªán Chi·∫øn tranh l·∫°nh.', 'B. S·ª± kh√°c bi·ªát v·ªÅ vƒÉn h√≥a gi·ªØa c√°c qu·ªëc gia.', 'C. ·∫¢nh h∆∞·ªüng v√† t√°c ƒë·ªông to l·ªõn t·ª´ Trung Qu·ªëc.', 'D. Chi·∫øn l∆∞·ª£c ph√°t tri·ªÉn kinh t·∫ø kh√°c nhau ·ªü c√°c n∆∞·ªõc.'],
    answer: 0
  },
  // Passage group 9-11
  {
    id: 'p1q9',
    text: 'C√¢u 9: N·ªôi dung n√†o sau ƒë√¢y ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p ƒë·∫øn trong ƒëo·∫°n t∆∞ li·ªáu tr√™n?',
    options: ['A. Vi·ªát Nam gi√∫p nh√¢n d√¢n Campuchia ch·ªëng ch·∫ø ƒë·ªô di·ªát ch·ªßng.', 'B. Vi·ªát Nam v√† Campuchia ƒëo√†n k·∫øt ƒë·ªÉ kh√°ng chi·∫øn ch·ªëng M·ªπ.', 'C. Vi·ªát Nam h·ªó tr·ª£ Campuchia ph√°t tri·ªÉn kinh t·∫ø sau chi·∫øn tranh.', 'D. Vi·ªát Nam v√† Campuchia thi·∫øt l·∫≠p quan h·ªá ƒë·ªëi t√°c chi·∫øn l∆∞·ª£c.'],
    answer: 0,
    passageId: 'passage1'
  },
  {
    id: 'p1q10',
    text: 'C√¢u 10: N·ªôi dung n√†o sau ƒë√¢y th·ªÉ hi·ªán ƒë√∫ng l√Ω do qu√¢n ƒë·ªôi Vi·ªát Nam ·ªü l·∫°i Campuchia giai ƒëo·∫°n 1979 ‚Äì 1989?',
    options: ['A. Nh·∫±m h·ªó tr·ª£ ch√≠nh quy·ªÅn P√¥n P·ªët x√¢y d·ª±ng ƒë·∫•t n∆∞·ªõc.', 'B. Gi√∫p ƒë·ª° nh√¢n d√¢n Campuchia x√¢y d·ª±ng l·∫°i ƒë·∫•t n∆∞·ªõc.', 'C. M·ªü m·∫∑t tr·∫≠n m·ªõi ƒë·ªÉ ti·∫øn h√†nh kh√°ng chi·∫øn ch·ªëng M·ªπ.', 'D. Ph·ªëi h·ª£p v·ªõi cu·ªôc chi·∫øn tranh b·∫£o v·ªá bi√™n gi·ªõi ph√≠a B·∫Øc.'],
    answer: 1,
    passageId: 'passage1'
  },
  {
    id: 'p1q11',
    text: 'C√¢u 11: Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ t√°c ƒë·ªông c·ªßa vi·ªác Vi·ªát Nam ƒë∆∞a qu√¢n sang gi√∫p ƒë·ª° nh√¢n d√¢n Campuchia giai ƒëo·∫°n 1979 ‚Äì 1989?',
    options: ['A. G√¢y kh√≥ khƒÉn cho vi·ªác Vi·ªát Nam gia nh·∫≠p t·ªï ch·ª©c Li√™n h·ª£p qu·ªëc.', 'B. G√¢y tr·ªü ng·∫°i cho qu√° tr√¨nh m·ªü r·ªông th√†nh vi√™n c·ªßa t·ªï ch·ª©c ASEAN.', 'C. NgƒÉn c·∫£n qu√° tr√¨nh Vi·ªát Nam th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc v·ªÅ m·∫∑t nh√† n∆∞·ªõc.', 'D. T·∫°o ƒëi·ªÅu ki·ªán thu·∫≠n l·ª£i ƒë·ªÉ Vi·ªát Nam ti·∫øn h√†nh c√¥ng cu·ªôc ƒë·ªïi m·ªõi.'],
    answer: 1,
    passageId: 'passage1'
  },
  {
    id: 'p1q12',
    text: 'C√¢u 12: T·ª´ nƒÉm 1951, t·ªï ch·ª©c n√†o sau ƒë√¢y ƒë√£ l√£nh ƒë·∫°o cu·ªôc kh√°ng ch·ªëng th·ª±c d√¢n Ph√°p c·ªßa nh√¢n d√¢n Vi·ªát Nam ƒëi ƒë·∫øn th·∫Øng l·ª£i?',
    options: ['A. ƒê·∫£ng Lao ƒë·ªông Vi·ªát Nam.', 'B. ƒê·∫£ng D√¢n ch·ªß Vi·ªát Nam.', 'C. Vi·ªát Nam Qu·ªëc d√¢n ƒë·∫£ng.', 'D. T√¢n Vi·ªát C√°ch m·∫°ng ƒë·∫£ng.'],
    answer: 0
  },
  {
    id: 'p1q13',
    text: 'C√¢u 13: N·ªÅn kinh t·∫ø Vi·ªát Nam tr∆∞·ªõc khi th·ª±c hi·ªán ƒë∆∞·ªùng l·ªëi ƒë·ªïi m·ªõi (1986) c√≥ ƒë·∫∑c ƒëi·ªÉm n√†o sau ƒë√¢y?',
    options: ['A. N·ªÅn kinh t·∫ø kh√©p k√≠n, t·ª± cung t·ª± c·∫•p.', 'B. N·ªÅn kinh t·∫ø t·∫≠p trung, quan li√™u, bao c·∫•p.', 'C. N·ªÅn kinh t·∫ø th·ªã tr∆∞·ªùng c√≥ ƒë·ªãnh h∆∞·ªõng.', 'D. N·ªÅn kinh t·∫ø h√†ng h√≥a nhi·ªÅu th√†nh ph·∫ßn.'],
    answer: 1
  },
  {
    id: 'p1q14',
    text: 'C√¢u 14: N·ªôi dung n√†o sau ƒë√¢y l√† m·ªôt trong nh·ªØng h·∫°n ch·∫ø c·ªßa c√¥ng cu·ªôc ƒë·ªïi ƒë·∫•t n∆∞·ªõc ·ªü Vi·ªát Nam tr√™n lƒ©nh v·ª±c vƒÉn h√≥a?',
    options: ['A. C√°c gi√° tr·ªã vƒÉn h√≥a ph∆∞∆°ng T√¢y ƒë∆∞·ª£c du nh·∫≠p m·∫°nh m·∫Ω.', 'B. Nhi·ªÅu gi√° tr·ªã vƒÉn h√≥a truy·ªÅn th·ªëng c·ªßa d√¢n t·ªôc b·ªã mai m·ªôt.', 'C. Kh√¥ng x√¢y d·ª±ng ƒë∆∞·ª£c h·ªá t∆∞ t∆∞·ªüng ch√≠nh th·ªëng v·ªÅ vƒÉn h√≥a.', 'D. VƒÉn h√≥a truy·ªÅn th·ªëng d√¢n t·ªôc kh√¥ng truy·ªÅn b√° ra b√™n ngo√†i.'],
    answer: 1
  },
  {
    id: 'p1q15',
    text: 'C√¢u 15: Ch·ªß t·ªãch H·ªì Ch√≠ Minh k√≠ v·ªõi ƒë·∫°i di·ªán Ch√≠nh ph·ªß Ph√°p T·∫°m ∆∞·ªõc (14/9/1946) nh·∫±m m·ª•c ƒë√≠ch',
    options: ['A. k√©o d√†i th·ªùi gian h√≤a b√¨nh, chu·∫©n b·ªã kh√°ng chi·∫øn.', 'B. tranh th·ªß s·ª± gi√∫p ƒë·ª° c·ªßa c√°c n∆∞·ªõc x√£ h·ªôi ch·ªß nghƒ©a.', 'C. bu·ªôc Ph√°p c√¥ng nh·∫≠n n·ªÅn ƒë·ªôc l·∫≠p c·ªßa Vi·ªát Nam.', 'D. nhanh ch√≥ng l·∫≠p l·∫°i h√≤a b√¨nh ·ªü ƒê√¥ng D∆∞∆°ng.'],
    answer: 0
  },
  {
    id: 'p1q16',
    text: 'C√¢u 16: M·ªôt trong nh·ªØng ho·∫°t ƒë·ªông ƒë·ªëi ngo·∫°i c·ªßa Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a trong nh·ªØng nƒÉm ƒë·∫ßu b√πng n·ªï cu·ªôc kh√°ng chi·∫øn to√†n qu·ªëc ch·ªëng th·ª±c d√¢n Ph√°p l√†',
    options: ['A. k√™u g·ªçi nh√¢n d√¢n Ph√°p ch·ªëng chi·∫øn tranh.', 'B. ti·∫øn h√†nh h·ª£p t√°c song ph∆∞∆°ng v·ªõi Hoa K√¨.', 'C. li√™n k·∫øt ch·∫∑t ch·∫Ω v·ªõi c√°c n∆∞·ªõc ph∆∞∆°ng T√¢y.', 'D. k√™u g·ªçi s·ª± gi√∫p ƒë·ª° c·ªßa c√°c n∆∞·ªõc t∆∞ b·∫£n.'],
    answer: 0
  },
  {
    id: 'p1q17',
    text: 'C√¢u 17: N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh kh√¥ng ƒë√∫ng ho·∫°t ƒë·ªông ƒë·ªëi ngo·∫°i c·ªßa Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a trong cu·ªôc kh√°ng chi·∫øn ch·ªëng Ph√°p (1945-1954)?',
    options: ['A. Nh·∫≠n vi·ªán tr·ª£ qu√¢n s·ª± t·ª´ c√°c n∆∞·ªõc T√¢y √Çu.', 'B. ƒê·ªÅ ngh·ªã Ph√°p m·ªü c√°c cu·ªôc th∆∞∆°ng l∆∞·ª£ng.', 'C. M·ªü c√°c c∆° quan ƒë·∫°i di·ªán ngo·∫°i giao ·ªü ch√¢u √Å.', 'D. L·∫≠p c√°c c∆° quan th√¥ng tin ·ªü nhi·ªÅu n∆∞·ªõc.'],
    answer: 0
  },
  {
    id: 'p1q18',
    text: 'C√¢u 18: T·ªï ch·ª©c n√†o sau ƒë√¢y ƒë∆∞·ª£c th√†nh l·∫≠p theo quy·∫øt ƒë·ªãnh c·ªßa H·ªôi ngh·ªã l·∫ßn th·ª© 8 Ban Ch·∫•p h√†nh Trung ∆∞∆°ng ƒê·∫£ng C·ªông s·∫£n ƒê√¥ng D∆∞∆°ng (5-1941)?',
    options: ['A. Vi·ªát Nam ƒê·ªôc l·∫≠p ƒê·ªìng minh.', 'B. ƒê·∫£ng Lao ƒë·ªông Vi·ªát Nam.', 'C. T√¢n Vi·ªát C√°ch m·∫°ng ƒë·∫£ng.', 'D. M·∫∑t tr·∫≠n D√¢n ch·ªß ƒê√¥ng D∆∞∆°ng.'],
    answer: 0
  },
  {
    id: 'p1q19',
    text: 'C√¢u 19: Ng√†y 22-12-1944, l·ª±c l∆∞·ª£ng v≈© trang n√†o sau ƒë√¢y ƒë∆∞·ª£c th√†nh l·∫≠p theo Ch·ªâ th·ªã c·ªßa H·ªì Ch√≠ Minh?',
    options: ['A. Vi·ªát Nam Tuy√™n truy·ªÅn Gi·∫£i ph√≥ng qu√¢n.', 'B. Qu√¢n Gi·∫£i ph√≥ng mi·ªÅn Nam Vi·ªát Nam.', 'C. Qu√¢n ƒë·ªôi Nh√¢n d√¢n Vi·ªát Nam.', 'D. ƒê·ªôi Vi·ªát Nam Gi·∫£i ph√≥ng qu√¢n.'],
    answer: 0
  },
  {
    id: 'p1q20',
    text: 'C√¢u 20: NƒÉm 1945, H·ªì Ch√≠ Minh c√≥ ho·∫°t ƒë·ªông n√†o sau ƒë√¢y?',
    options: ['A. Ph√°t ƒë·ªông v√† l√£nh ƒë·∫°o nh√¢n d√¢n T·ªïng kh·ªüi nghƒ©a gi√†nh ch√≠nh quy·ªÅn.', 'B. L√£nh ƒë·∫°o nh√¢n d√¢n Vi·ªát Nam ti·∫øn h√†nh kh√°ng chi·∫øn ch·ªëng Ph√°p v√† M·ªπ.', 'C. X√¢y d·ª±ng v√† ho√†n thi·ªán ƒë∆∞·ªùng l·ªëi gi·∫£i ph√≥ng d√¢n t·ªôc ·ªü Vi·ªát Nam.', 'D. Tri·ªáu t·∫≠p v√† ch·ªß tr√¨ h·ªôi ngh·ªã h·ª£p nh·∫•t c√°c t·ªï ch·ª©c c·ªông s·∫£n ·ªü Vi·ªát Nam.'],
    answer: 0
  },
  {
    id: 'p1q21',
    text: 'C√¢u 21: Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ v·ªã th·∫ø c·ªßa c√°c c∆∞·ªùng qu·ªëc trong tr·∫≠t t·ª± th·∫ø gi·ªõi hai c·ª±c I-an-ta (1945 ‚Äì 1991)?',
    options: ['A. Li√™n X√¥ ƒë√£ c√≥ l·ª£i th·∫ø khi ƒë∆∞·ª£c ph√¢n chia c√°c v√πng thu·ªôc ƒë·ªãa.', 'B. Anh kh√¥ng c√≤n gi·ªØ ƒë∆∞·ª£c vai tr√≤ qu·ªëc t·∫ø nh∆∞ giai ƒëo·∫°n tr∆∞·ªõc.', 'C. Mƒ© gi·ªØ vai tr√≤ quy·∫øt ƒë·ªãnh chi ph·ªëi m·ªçi m·ªëi quan h·ªá qu·ªëc t·∫ø.', 'D. Nh·∫≠t B·∫£n v∆∞∆°n l√™n tr·ªü th√†nh m·ªôt c∆∞·ªùng qu·ªëc v·ªÅ ch√≠nh tr·ªã.'],
    answer: 1
  },
  {
    id: 'p1q22',
    text: 'C√¢u 22: Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng m·ªôt trong nh·ªØng th√°ch th·ª©c n·ªôi kh·ªëi ƒë·ªëi v·ªõi C·ªông ƒë·ªìng ASEAN?',
    options: ['A. S·ª± ch√™nh l·ªách v·ªÅ thu nh·∫≠p v√† tr√¨nh ƒë·ªô ph√°t tri·ªÉn gi·ªØa c√°c n∆∞·ªõc.', 'B. Ch·ªãu s·ª± c·∫°nh tranh, ·∫£nh h∆∞·ªüng c·ªßa c√°c n∆∞·ªõc l·ªõn ƒë·ªëi v·ªõi khu v·ª±c.', 'C. Nh·ªØng di·ªÖn bi·∫øn ph·ª©c t·∫°p c·ªßa t√¨nh h√¨nh bi·ªÉn ƒê√¥ng v√† qu·ªëc t·∫ø.', 'D. V·∫•n n·∫°n bi·∫øn ƒë·ªïi kh√≠ h·∫≠u, √¥ nhi·ªÖm m√¥i tr∆∞·ªùng v√† d·ªãch b·ªánh.'],
    answer: 0
  },
  {
    id: 'p1q23',
    text: 'C√¢u 23: Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªõi s·ª± ph√°t tri·ªÉn c·ªßa c√°ch m·∫°ng Vi·ªát Nam trong giai ƒëo·∫°n 1954 ‚Äì 1975?',
    options: ['A. C√°ch m·∫°ng mi·ªÅn Nam ph√°t tri·ªÉn ph·ª• thu·ªôc v√†o c√°ch m·∫°ng mi·ªÅn B·∫Øc.', 'B. C√°ch m·∫°ng mi·ªÅn Nam quy·∫øt ƒë·ªãnh s·ª± ph√°t tri·ªÉn c·ªßa c√°ch m·∫°ng c·∫£ n∆∞·ªõc.', 'C. C√°ch m·∫°ng hai mi·ªÅn c√≥ m·ªëi li√™n h·ªá m·∫≠t thi·∫øt, g·∫Øn b√≥, t√°c ƒë·ªông l·∫´n nhau.', 'D. C√°ch m·∫°ng mi·ªÅn B·∫Øc v√† mi·ªÅn Nam ph√°t tri·ªÉn ƒë·ªôc l·∫≠p v√† tri·ªát ti√™u nhau.'],
    answer: 2
  },
  {
    id: 'p1q24',
    text: 'C√¢u 24: Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng √Ω nghƒ©a s·ª± ki·ªán Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a k√≠ v·ªõi Ph√°p Hi·ªáp ƒë·ªãnh Gi∆°-ne-v∆° (1954)?',
    options: ['A. L·∫ßn ƒë·∫ßu ti√™n ngo·∫°i giao Vi·ªát Nam ƒë√†m ph√°n ƒëa ph∆∞∆°ng v·ªõi c√°c n∆∞·ªõc l·ªõn.', 'B. H·ª£p t√°c ƒëa ph∆∞∆°ng gi·ªØa Vi·ªát Nam v·ªõi c√°c c∆∞·ªùng qu·ªëc l·ªõn ƒë∆∞·ª£c thi·∫øt l·∫≠p.', 'C. Quan h·ªá ngo·∫°i giao gi·ªØa hai n∆∞·ªõc Vi·ªát Nam v√† Ph√°p n√¢ng l√™n t·∫ßm cao m·ªõi.', 'D. Vi·ªát Nam tr·ªü th√†nh th√†nh vi√™n c·ªßa Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å.'],
    answer: 0
  }
];

const PASSAGES = {
  passage1: {
    title: 'ƒê·ªçc t∆∞ li·ªáu d∆∞·ªõi ƒë√¢y v√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi t·ª´ 9 ƒë·∫øn 11:',
    content: `"Theo y√™u c·∫ßu c·ªßa Ch√≠nh ph·ªß C·ªông h√≤a Nh√¢n d√¢n Campuchia, Vi·ªát Nam ƒë·ªÉ l·∫°i m·ªôt l·ª±c l∆∞·ª£ng qu√¢n t√¨nh nguy·ªán v√† c·ª≠ chuy√™n gia c√°c ng√†nh sang gi√∫p nh√¢n d√¢n Campuchia ·ªïn ƒë·ªãnh cu·ªôc s·ªëng. Qu√¢n ƒë·ªôi Vi·ªát Nam ph·ªëi h·ª£p v·ªõi l·ª±c l∆∞·ª£ng v≈© trang c·ªßa C·ªông h√≤a Nh√¢n d√¢n Campuchia truy qu√©t t√†n qu√¢n P√¥n P·ªët. Nhi·ªÅu c√°n b·ªô, trong ƒë√≥ c√≥ nhi·ªÅu c√°n b·ªô trung cao c·∫•p (c√≥ m·ªôt ·ªßy vi√™n B·ªô Ch√≠nh tr·ªã v√† hai ·ªßy vi√™n Trung ∆∞∆°ng ƒê·∫£ng) ·ªü c√°c ban, ng√†nh ·ªü Trung ∆∞∆°ng v√† c√°c t·ªânh ƒë√£ ƒë∆∞·ª£c c·ª≠ sang gi√∫p c√°ch m·∫°ng Campuchia c·∫£ v·ªÅ ch√≠nh tr·ªã, qu√¢n s·ª±, kinh t·∫ø, k·ªπ thu·∫≠t, y t·∫ø, gi√°o d·ª•c, vƒÉn h√≥a, ngh·ªá thu·∫≠t. C√°c t·ªï chuy√™n gia ho·∫°t ƒë·ªông theo t·ª´ng th·ªùi gian ·ªü c√°c c·∫•p t·ª´ Trung ∆∞∆°ng ƒë·∫øn c·∫•p huy·ªán."`,
    source: '(Tr·∫ßn ƒê·ª©c C∆∞·ªùng: L·ªãch s·ª≠ Vi·ªát Nam, t·∫≠p 14 (2017), NXB Khoa h·ªçc x√£ h·ªôi, trang 350)'
  }
};

const PART2_DATA = [
  {
    id: 'p2q1',
    title: 'C√¢u 1: Cho nh·ªØng th√¥ng tin trong b·∫£ng sau ƒë√¢y:',
    tableContent: `<table style="width:100%;border-collapse:collapse;font-size:0.88rem;margin-bottom:10px;">
      <tr style="background:#eef2f8;">
        <td style="border:1px solid #c9d8ee;padding:8px 12px;font-weight:700;white-space:nowrap;">(5/1941)</td>
        <td style="border:1px solid #c9d8ee;padding:8px 12px;">Nguy·ªÖn √Åi Qu·ªëc ch·ªß tr√¨, ƒë·ªãa ƒëi·ªÉm t·∫°i Cao B·∫±ng, th√†nh l·∫≠p M·∫∑t tr·∫≠n Vi·ªát Minh, nhi·ªám v·ª• tr∆∞·ªõc m·∫Øt: gi·∫£i ph√≥ng d√¢n t·ªôc, chu·∫©n b·ªã kh·ªüi nghƒ©a v≈© trang...</td>
      </tr>
      <tr>
        <td style="border:1px solid #c9d8ee;padding:8px 12px;font-weight:700;white-space:nowrap;">(14-15/8/1945)</td>
        <td style="border:1px solid #c9d8ee;padding:8px 12px;">Nguy·ªÖn √Åi Qu·ªëc tri·ªáu t·∫≠p v√† ch·ªß tr√¨, ƒë·ªãa ƒëi·ªÉm t·∫°i Tuy√™n Quang, th√¥ng qua k·∫ø ho·∫°ch l√£nh ƒë·∫°o to√†n d√¢n T·ªïng kh·ªüi nghƒ©a.</td>
      </tr>
      <tr style="background:#eef2f8;">
        <td style="border:1px solid #c9d8ee;padding:8px 12px;font-weight:700;white-space:nowrap;">(16, 17/8/1945)</td>
        <td style="border:1px solid #c9d8ee;padding:8px 12px;">Nguy·ªÖn √Åi Qu·ªëc ch·ªß tr√¨, ƒë·ªãa ƒëi·ªÉm t·∫°i Tuy√™n Quang, t√°n th√†nh ch·ªß tr∆∞∆°ng T·ªïng kh·ªüi nghƒ©a, th√¥ng qua 10 ch√≠nh s√°ch c·ªßa Vi·ªát Minh.</td>
      </tr>
      <tr>
        <td style="border:1px solid #c9d8ee;padding:8px 12px;font-weight:700;white-space:nowrap;">Th√°ng 2/1951</td>
        <td style="border:1px solid #c9d8ee;padding:8px 12px;">Ch·ªß tr√¨ ƒê·∫°i h·ªôi ƒë·∫°i bi·ªÉu to√†n l·∫ßn II c·ªßa ƒê·∫£ng C·ªông s·∫£n ƒê√¥ng D∆∞∆°ng.</td>
      </tr>
    </table>`,
    items: [
      { label: 'a', text: 'T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn qu√° tr√¨nh l√£nh ƒë·∫°o c√°ch m·∫°ng Vi·ªát Nam c·ªßa Nguy·ªÖn √Åi Qu·ªëc ‚Äì H·ªì Ch√≠ Minh trong cu·ªôc kh√°ng chi·∫øn ch·ªëng Ph√°p.', answer: false },
      { label: 'b', text: 'Trong qu√° tr√¨nh chu·∫©n b·ªã kh·ªüi nghƒ©a cho cu·ªôc v≈© trang gi√†nh ch√≠nh quy·ªÅn, Nguy·ªÖn √Åi Qu·ªëc ƒë√≥ng vai tr√≤ l√£nh ƒë·∫°o, v·∫°ch ra ƒë∆∞·ªùng l·ªëi.', answer: true },
      { label: 'c', text: 'T·ª´ 1941 ƒë·∫øn 1951, v·ªõi vai tr√≤ ng∆∞·ªùi ƒë·ª©ng ƒë·∫ßu ƒë·∫•t n∆∞·ªõc, Nguy·ªÖn √Åi Qu·ªëc ‚Äì H·ªì Ch√≠ Minh ƒë√£ c√≥ nhi·ªÅu ƒë√≥ng g√≥p quan tr·ªçng cho c√°ch m·∫°ng.', answer: false },
      { label: 'd', text: 'ƒê·∫°i h·ªôi ƒë·∫°i bi·ªÉu l·∫ßn th·ª© hai c·ªßa ƒê·∫£ng C·ªông s·∫£n ƒê√¥ng D∆∞∆°ng ƒë√£ x√°c l·∫≠p vai tr√≤ l√£nh ƒë·∫°o c√°ch m·∫°ng c·ªßa Nguy·ªÖn √Åi Qu·ªëc ‚Äì H·ªì Ch√≠ Minh.', answer: false }
    ]
  },
  {
    id: 'p2q2',
    title: 'C√¢u 2: Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:',
    passage: `"V·ªõi s·ª± k·∫øt th√∫c c·ªßa Chi·∫øn tranh l·∫°nh, m·ªôt s·ªë qu·ªëc gia m·ªõi n·ªïi, ƒë·∫∑c bi·ªát l√† Trung Qu·ªëc v√† ·∫§n ƒê·ªô, ƒë√£ b·∫Øt ƒë·∫ßu kh·∫≥ng ƒë·ªãnh v·ªã th·∫ø c·ªßa m√¨nh trong tr·∫≠t t·ª± qu·ªëc t·∫ø. S·ª± tƒÉng tr∆∞·ªüng kinh t·∫ø v∆∞·ª£t b·∫≠c v√† s·ª± gia tƒÉng s·ª©c m·∫°nh qu√¢n s·ª± c·ªßa nh·ªØng qu·ªëc gia n√†y ƒë√£ th√°ch th·ª©c v·ªã tr√≠ th·ªëng tr·ªã c·ªßa Hoa K·ª≥ v√† l√†m cho th·∫ø gi·ªõi tr·ªü n√™n ƒëa c·ª±c h∆°n. Trong b·ªëi c·∫£nh n√†y, s·ª± h·ª£p t√°c qu·ªëc t·∫ø v√† vi·ªác t√¨m ki·∫øm c√¢n b·∫±ng quy·ªÅn l·ª±c tr·ªü th√†nh nh·ªØng y·∫øu t·ªë then ch·ªët ƒë·ªÉ duy tr√¨ ·ªïn ƒë·ªãnh to√†n c·∫ßu".`,
    passageSource: '(Fareed Zakaria, S·ª± tr·ªói d·∫≠y c·ªßa c√°c qu·ªëc gia m·ªõi n·ªïi v√† tr·∫≠t t·ª± th·∫ø gi·ªõi, 2008, tr. 34-35)',
    items: [
      { label: 'a', text: 'Sau khi chi·∫øn tranh l·∫°nh ch·∫•m d·ª©t, Trung Qu·ªëc v√† ·∫§n ƒê·ªô ƒë√£ v∆∞∆°n l√™n tr·ªü th√†nh c√°c c·ª±c trong tr·∫≠t t·ª± th·∫ø gi·ªõi m·ªõi ƒëang h√¨nh th√†nh.', answer: true },
      { label: 'b', text: 'S·ª©c m·∫°nh kinh t·∫ø v√† qu√¢n s·ª± c·ªßa c√°c c∆∞·ªùng qu·ªëc ƒë√£ ƒë·ªãnh h√¨nh l·∫°i tr·∫≠t t·ª± th·∫ø gi·ªõi m·ªõi, l√†m cho th·∫ø gi·ªõi tr·ªü n√™n cƒÉng th·∫≥ng ph·ª©c t·∫°p.', answer: false },
      { label: 'c', text: 'H·ª£p t√°c qu·ªëc t·∫ø v√† s·ª± c√¢n b·∫±ng quy·ªÅn l·ª±c gi·ªØa c√°c c∆∞·ªùng qu·ªëc l√† y·∫øu t·ªë then ch·ªët ƒë·ªÉ ƒë·∫£m b·∫£o v√† duy tr√¨ s·ª± ·ªïn ƒë·ªãnh to√†n c·∫ßu.', answer: true },
      { label: 'd', text: 'Th·∫ø gi·ªõi sau Chi·∫øn tranh l·∫°nh ph√°t tri·ªÉn ƒë·ªÅ cao y·∫øu t·ªë l·ª£i √≠ch qu·ªëc gia, d√¢n t·ªôc, ƒë·ªìng th·ªùi tƒÉng c∆∞·ªùng s·ª©c m·∫°nh c·ªßa c√°c phe.', answer: false }
    ]
  },
  {
    id: 'p2q3',
    title: 'C√¢u 3: Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:',
    passage: `"Th·∫Øng l·ª£i to l·ªõn c·ªßa cu·ªôc T·ªïng ti·∫øn c√¥ng T·∫øt M·∫≠u Th√¢n nƒÉm 1968 ƒë√£ l√†m nh·ª•t √Ω ch√≠ x√¢m l∆∞·ª£c c·ªßa qu√¢n M·ªπ v√† l√†m ƒë·∫£o l·ªôn th·∫ø chi·∫øn l∆∞·ª£c c·ªßa ch√∫ng tr√™n chi·∫øn tr∆∞·ªùng. ƒê√™m 31 - 3 - 1968, T·ªïng th·ªëng M·ªπ B. Johnson bu·ªôc ph·∫£i ƒë∆°n ph∆∞∆°ng tuy√™n b·ªë ch·∫•m d·ª©t vai tr√≤ chi·∫øn ƒë·∫•u tr·ª±c ti·∫øp c·ªßa qu√¢n ƒë·ªôi M·ªπ tr√™n chi·∫øn tr∆∞·ªùng mi·ªÅn Nam v√† trao tr·∫£ tr√°ch nhi·ªám cho qu√¢n ƒë·ªôi S√†i G√≤n, ng·ª´ng to√†n b·ªô h√†nh ƒë·ªông kh√¥ng qu√¢n v√† h·∫£i qu√¢n ch·ªëng Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a, ch·∫•m d·ª©t n√©m bom mi·ªÅn B·∫Øc t·ª´ vƒ© tuy·∫øn 20 tr·ªü ra v√† s·∫µn s√†ng c·ª≠ ƒë·∫°i di·ªán ƒë√†m ph√°n v·ªõi ph√≠a Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a".`,
    passageSource: '(Nguy·ªÖn ƒê√¨nh Lu√¢n, B√†i h·ªçc k·∫øt h·ª£p "v·ª´a ƒë√°nh, v·ª´a ƒë√†m" trong cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ, c·ª©u n∆∞·ªõc, T·∫°p ch√≠ C·ªông s·∫£n, s·ªë ra ng√†y 13/3/2023)',
    items: [
      { label: 'a', text: 'T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn nh·ªØng √Ω nghƒ©a to l·ªõn c·ªßa cu·ªôc T·ªïng ti·∫øn c√¥ng v√† n·ªïi d·∫≠y M·∫≠u Th√¢n 1968 trong kh√°ng chi·∫øn ch·ªëng M·ªπ.', answer: true },
      { label: 'b', text: 'Chi·∫øn th·∫Øng M·∫≠u Th√¢n 1968 ƒë√£ ƒë√°nh b·∫°i chi·∫øn tranh c·ª•c b·ªô, bu·ªôc M·ªπ xu·ªëng thang v√† "M·ªπ h√≥a" chi·∫øn tranh x√¢m l∆∞·ª£c Vi·ªát Nam.', answer: false },
      { label: 'c', text: 'V·ªõi chi·∫øn th·∫Øng trong M·∫≠u Th√¢n, m·ªôt m·∫∑t tr·∫≠n m·ªõi ƒë√£ ƒë∆∞·ª£c m·ªü ra trong cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ c·ªßa nh√¢n d√¢n Vi·ªát Nam.', answer: true },
      { label: 'd', text: 'Cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ ƒë√£ c√≥ t√≠nh ch√≠nh nghƒ©a khi m·∫∑t tr·∫≠n ngo·∫°i giao ƒë∆∞·ª£c m·ªü ra sau chi·∫øn th·∫Øng M·∫≠u Th√¢n 1968.', answer: false }
    ]
  },
  {
    id: 'p2q4',
    title: 'C√¢u 4: Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:',
    passage: `" Sau c√°ch m·∫°ng th√°ng T√°m nƒÉm 1945, ch∆∞a c√≥ m·ªôt qu·ªëc gia n√†o tr√™n th·∫ø gi·ªõi c√¥ng nh·∫≠n n∆∞·ªõc Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a. Hi·ªáp ƒë·ªãnh S∆° b·ªô ng√†y 6/3/1946 ƒë∆∞·ª£c k√≠ k·∫øt gi·ªØa Ch√≠nh ph·ªß ta v·ªõi ƒë·∫°i di·ªán ch√≠nh ph·ªß Ph√°p ·ªü Vi·ªát Nam m·ªõi l√† "s·ª± th·ª´a nh·∫≠n tr√™n th·ª±c t·∫ø", s·ª± c√≥ m·∫∑t c·ªßa ƒë·∫°i di·ªán c√°c ph√°i b·ªô ƒê·ªìng minh trong l·ªÖ k√≠ t·∫°i H√† N·ªôi c≈©ng mang √Ω nghƒ©a ƒë√≥. Nh∆∞ng ƒë·∫øn H·ªôi ngh·ªã Gi∆°nev∆°, v·ªõi b·∫£n tham d·ª± c·ªßa nƒÉm c∆∞·ªùng qu·ªëc, b·∫£n tuy√™n b·ªë cu·ªëi c√πng ƒë√£ ghi nh·∫≠n n·ªÅn ƒë·ªôc l·∫≠p, th·ªëng nh·∫•t, ch·ªß quy·ªÅn v√† to√†n v·∫πn l√£nh th·ªï c·ªßa Vi·ªát Nam, L√†o, Campuchia".`,
    passageSource: '( V≈© D∆∞∆°ng Ninh, L·ªãch s·ª≠ quan h·ªá ƒë·ªëi ngo·∫°i Vi·ªát Nam 1940-2010, NXB Ch√≠nh tr·ªã qu·ªëc gia S·ª± th·∫≠t, H√† N·ªôi, 2015, tr.143-144).',
    items: [
      { label: 'a', text: 'Ngay sau c√°ch m·∫°ng th√°ng T√°m nƒÉm 1945, ch∆∞a c√≥ n∆∞·ªõc n√†o tr√™n th·∫ø gi·ªõi c√¥ng nh·∫≠n s·ª± t·ªìn t·∫°i v√† ƒë·ªôc l·∫≠p c·ªßa n∆∞·ªõc Vi·ªát Nam m·ªõi.', answer: true },
      { label: 'b', text: 'Hi·ªáp ƒë·ªãnh S∆° b·ªô ƒë√£ m·ªü ra con ƒë∆∞·ªùng cho s·ª± c√¥ng nh·∫≠n c·ªßa qu·ªëc t·∫ø ƒë·ªëi v·ªõi ch√≠nh ph·ªß v√† n∆∞·ªõc Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a.', answer: true },
      { label: 'c', text: 'Hi·ªáp ƒë·ªãnh Gi∆° ne v∆° nƒÉm 1954 ƒë∆∞·ª£c k√Ω k·∫øt l√† s·ª± k·∫ø th·ª´a to√†n di·ªán nh·ªØng n·ªôi dung c·ªßa Hi·ªáp ƒë·ªãnh S∆° b·ªô ƒë∆∞·ª£c k√Ω nƒÉm 1946.', answer: false },
      { label: 'd', text: 'T·ª´ Hi·ªáp ƒë·ªãnh S∆° b·ªô ƒë·∫øn Hi·ªáp ƒë·ªãnh Gi∆° ne v∆° l√† qu√° tr√¨nh c√°c n∆∞·ªõc ƒë·ªìng minh th·ª´a nh·∫≠n v√† thi·∫øt l·∫≠p m·ªëi quan h·ªá v·ªõi Vi·ªát Nam.', answer: false }
    ]
  }
];

// ============================================================
// STATE
// ============================================================
let userAnswers = {}; // p1q1 -> optionIndex
let userTFAnswers = {}; // p2q1_a -> true/false/null
let submitted = false;
let timerInterval = null;
let timeLeft = 45 * 60;
let shuffledPart1 = [];

// ============================================================
// SHUFFLE
// ============================================================
function shuffleArray(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function initExam() {
  // Shuffle Part 1 questions but keep passage group together
  const passageGroup = PART1_DATA.filter(q => q.passageId);
  const nonPassage = PART1_DATA.filter(q => !q.passageId);
  
  // Shuffle non-passage questions
  const shuffledNonPassage = shuffleArray(nonPassage);
  
  // Insert passage group at a random position (keeping them together)
  const insertPos = Math.floor(Math.random() * (shuffledNonPassage.length + 1));
  shuffledPart1 = [
    ...shuffledNonPassage.slice(0, insertPos),
    ...passageGroup,
    ...shuffledNonPassage.slice(insertPos)
  ];

  userAnswers = {};
  userTFAnswers = {};
  submitted = false;
  timeLeft = 45 * 60;

  renderExam();
  startTimer();
  updateProgress();
}

// ============================================================
// RENDER
// ============================================================
function renderExam() {
  const container = document.getElementById('examContent');
  let html = '';

  // PART 1
  html += `<div class="section-title">PH·∫¶N I: C√¢u h·ªèi tr·∫Øc nghi·ªám (C√¢u 1 ‚Äì 24)</div>`;
  html += `<div class="section-desc">Th√≠ sinh tr·∫£ l·ªùi c√¢u h·ªèi t·ª´ 1 ƒë·∫øn 24. M·ªói c√¢u h·ªèi th√≠ sinh ch·ªâ ch·ªçn <strong>m·ªôt</strong> ph∆∞∆°ng √°n.</div>`;

  let passageRendered = false;
  shuffledPart1.forEach((q, idx) => {
    // Render passage before its first question
    if (q.passageId && !passageRendered) {
      const p = PASSAGES[q.passageId];
      html += `<div class="question-card" style="border-left:4px solid var(--gold);">
        <div class="question-num" style="color:var(--gold);">üìú ${p.title}</div>
        <div class="passage-box">${p.content}<div class="passage-source">${p.source}</div></div>
      </div>`;
      passageRendered = true;
    }

    html += renderPart1Question(q, idx + 1);
  });

  // PART 2
  html += `<div class="section-title" style="margin-top:40px;">PH·∫¶N II: C√¢u h·ªèi ƒë√∫ng/sai (C√¢u 1 ‚Äì 4)</div>`;
  html += `<div class="section-desc">Trong m·ªói √Ω a), b), c), d) ·ªü m·ªói c√¢u, th√≠ sinh ch·ªçn <strong>ƒê√∫ng</strong> ho·∫∑c <strong>Sai</strong>.</div>`;

  PART2_DATA.forEach((q) => {
    html += renderPart2Question(q);
  });

  container.innerHTML = html;
}

function renderPart1Question(q, displayNum) {
  const optLetters = ['A', 'B', 'C', 'D'];
  let optHtml = '';
  q.options.forEach((opt, i) => {
    const text = opt.replace(/^[A-D]\.\s*/, '');
    optHtml += `
      <label class="option-label" id="lbl_${q.id}_${i}" onclick="selectOption('${q.id}', ${i}, ${q.answer})">
        <input type="radio" name="${q.id}" value="${i}">
        <span class="option-dot" id="dot_${q.id}_${i}">${optLetters[i]}</span>
        <span>${text}</span>
      </label>`;
  });

  return `<div class="question-card" id="card_${q.id}">
    <div class="question-num">C√¢u ${displayNum}</div>
    <div class="question-text">${q.text.replace(/^C√¢u \d+[:.]?\s*/, '')}</div>
    <div class="options" id="opts_${q.id}">${optHtml}</div>
    <div class="explanation" id="exp_${q.id}"></div>
  </div>`;
}

function renderPart2Question(q) {
  let passageHtml = '';
  if (q.tableContent) {
    passageHtml = `<div class="passage-box" style="font-style:normal;">${q.tableContent}</div>`;
  } else if (q.passage) {
    passageHtml = `<div class="passage-box">${q.passage}<div class="passage-source">${q.passageSource}</div></div>`;
  }

  let itemsHtml = '';
  q.items.forEach(item => {
    itemsHtml += `
      <div class="tf-item" id="tfitem_${q.id}_${item.label}">
        <div class="tf-item-label"><strong>${item.label})</strong> ${item.text}</div>
        <div class="tf-buttons">
          <button class="tf-btn" id="tfbtn_${q.id}_${item.label}_true" onclick="selectTF('${q.id}', '${item.label}', true)">‚úì ƒê√∫ng</button>
          <button class="tf-btn" id="tfbtn_${q.id}_${item.label}_false" onclick="selectTF('${q.id}', '${item.label}', false)">‚úó Sai</button>
        </div>
      </div>`;
  });

  return `<div class="question-card" id="card_${q.id}">
    <div class="question-num">üìå ${q.title}</div>
    ${passageHtml}
    <div class="tf-grid">${itemsHtml}</div>
  </div>`;
}

// ============================================================
// INTERACTIONS
// ============================================================
function selectOption(qId, optIdx, correctIdx) {
  if (submitted) return;
  userAnswers[qId] = optIdx;

  // Update UI
  const q = PART1_DATA.find(q => q.id === qId);
  if (!q) return;
  q.options.forEach((_, i) => {
    const lbl = document.getElementById(`lbl_${qId}_${i}`);
    if (lbl) {
      lbl.classList.toggle('selected', i === optIdx);
    }
  });
  updateProgress();
}

function selectTF(qId, itemLabel, value) {
  if (submitted) return;
  const key = `${qId}_${itemLabel}`;
  userTFAnswers[key] = value;

  const btnTrue = document.getElementById(`tfbtn_${qId}_${itemLabel}_true`);
  const btnFalse = document.getElementById(`tfbtn_${qId}_${itemLabel}_false`);
  if (btnTrue) { btnTrue.classList.toggle('selected-true', value === true); btnTrue.classList.remove('selected-false'); }
  if (btnFalse) { btnFalse.classList.toggle('selected-false', value === false); btnFalse.classList.remove('selected-true'); }
  updateProgress();
}

// ============================================================
// PROGRESS
// ============================================================
function updateProgress() {
  const totalPart1 = PART1_DATA.length;
  const totalPart2Items = PART2_DATA.reduce((s, q) => s + q.items.length, 0);
  const total = totalPart1 + totalPart2Items;

  const answeredPart1 = Object.keys(userAnswers).length;
  const answeredPart2 = Object.keys(userTFAnswers).length;
  const answered = answeredPart1 + answeredPart2;

  document.getElementById('answeredCount').textContent = answered;
  document.getElementById('totalQ').textContent = total;
  document.getElementById('progressBar').style.width = (answered / total * 100) + '%';
}

// ============================================================
// TIMER
// ============================================================
function startTimer() {
  if (timerInterval) clearInterval(timerInterval);
  updateTimerDisplay();
  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerDisplay();
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      autoSubmit();
    }
  }, 1000);
}

function updateTimerDisplay() {
  const m = Math.floor(timeLeft / 60);
  const s = timeLeft % 60;
  const disp = document.getElementById('timerDisplay');
  disp.textContent = String(m).padStart(2, '0') + ':' + String(s).padStart(2, '0');
  disp.className = 'timer-display';
  if (timeLeft <= 300 && timeLeft > 60) disp.classList.add('warning');
  if (timeLeft <= 60) disp.classList.add('danger');
}

function autoSubmit() {
  doSubmit();
}

// ============================================================
// SUBMIT
// ============================================================
function confirmSubmit() {
  const totalPart1 = PART1_DATA.length;
  const totalPart2Items = PART2_DATA.reduce((s, q) => s + q.items.length, 0);
  const total = totalPart1 + totalPart2Items;
  const answeredPart1 = Object.keys(userAnswers).length;
  const answeredPart2 = Object.keys(userTFAnswers).length;
  const answered = answeredPart1 + answeredPart2;
  const unanswered = total - answered;

  let msg = `B·∫°n ƒë√£ tr·∫£ l·ªùi <strong>${answered}/${total}</strong> c√¢u h·ªèi.`;
  if (unanswered > 0) msg += `<br><span style="color:var(--warning)">C√≤n ${unanswered} c√¢u ch∆∞a tr·∫£ l·ªùi.</span>`;
  msg += '<br>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i kh√¥ng?';

  document.getElementById('confirmMsg').innerHTML = msg;
  document.getElementById('confirmModal').classList.add('show');
}

function closeConfirm() {
  document.getElementById('confirmModal').classList.remove('show');
}

function doSubmit() {
  closeConfirm();
  clearInterval(timerInterval);
  submitted = true;

  // Calculate scores
  // Part 1: 0.25 each
  let part1Correct = 0;
  shuffledPart1.forEach(q => {
    if (userAnswers[q.id] === q.answer) part1Correct++;
  });
  const part1Score = part1Correct * 0.25;

  // Part 2: tiered scoring
  let part2Score = 0;
  PART2_DATA.forEach(q => {
    let correctItems = 0;
    q.items.forEach(item => {
      const key = `${q.id}_${item.label}`;
      const userVal = userTFAnswers[key];
      if (userVal !== undefined && userVal !== null && userVal === item.answer) {
        correctItems++;
      }
    });
    if (correctItems === 1) part2Score += 0.1;
    else if (correctItems === 2) part2Score += 0.25;
    else if (correctItems === 3) part2Score += 0.5;
    else if (correctItems === 4) part2Score += 1.0;
  });

  const totalScore = part1Score + part2Score;

  showResults(totalScore, part1Score, part2Score, part1Correct);
  markAnswers();
}

function markAnswers() {
  // Part 1
  shuffledPart1.forEach(q => {
    const userAns = userAnswers[q.id];
    q.options.forEach((_, i) => {
      const lbl = document.getElementById(`lbl_${q.id}_${i}`);
      if (!lbl) return;
      lbl.classList.remove('selected', 'correct', 'wrong');
      if (i === q.answer) {
        lbl.classList.add('correct');
      } else if (userAns === i) {
        lbl.classList.add('wrong');
      }
    });

    // Show explanation if wrong or unanswered
    const exp = document.getElementById(`exp_${q.id}`);
    if (exp) {
      const isCorrect = userAnswers[q.id] === q.answer;
      const optLetters = ['A', 'B', 'C', 'D'];
      exp.innerHTML = isCorrect
        ? `‚úÖ <strong>Ch√≠nh x√°c!</strong> ƒê√°p √°n ƒë√∫ng: <strong>${optLetters[q.answer]}</strong>.`
        : `‚ùå <strong>Sai.</strong> ƒê√°p √°n ƒë√∫ng: <strong>${optLetters[q.answer]}</strong>.`;
      exp.classList.add('show');
    }
  });

  // Part 2
  PART2_DATA.forEach(q => {
    q.items.forEach(item => {
      const key = `${q.id}_${item.label}`;
      const userVal = userTFAnswers[key];
      const correct = item.answer;

      const btnTrue = document.getElementById(`tfbtn_${q.id}_${item.label}_true`);
      const btnFalse = document.getElementById(`tfbtn_${q.id}_${item.label}_false`);

      if (btnTrue) {
        btnTrue.classList.remove('selected-true', 'selected-false', 'correct-true', 'wrong-true', 'correct-false', 'wrong-false');
        if (correct === true) {
          btnTrue.classList.add('correct-true');
        } else if (userVal === true) {
          btnTrue.classList.add('wrong-true');
        }
      }
      if (btnFalse) {
        btnFalse.classList.remove('selected-true', 'selected-false', 'correct-true', 'wrong-true', 'correct-false', 'wrong-false');
        if (correct === false) {
          btnFalse.classList.add('correct-false');
        } else if (userVal === false) {
          btnFalse.classList.add('wrong-false');
        }
      }
    });
  });

  // Disable submit button
  document.getElementById('btnSubmit').disabled = true;
}

function showResults(total, p1, p2, p1Correct) {
  const icon = total >= 8 ? 'üèÜ' : total >= 6 ? 'üéì' : total >= 4 ? 'üìö' : 'üí™';
  const title = total >= 8 ? 'Xu·∫•t s·∫Øc!' : total >= 6 ? 'Kh√° t·ªët!' : total >= 4 ? 'C·∫ßn c·ªë g·∫Øng th√™m' : 'H√£y √¥n t·∫≠p th√™m';

  document.getElementById('resultIcon').textContent = icon;
  document.getElementById('resultTitle').textContent = title;
  document.getElementById('scoreBig').textContent = total.toFixed(2) + ' / 10';

  document.getElementById('scoreRow').innerHTML = `
    <div class="score-box"><div class="sb-label">Ph·∫ßn I</div><div class="sb-val">${p1.toFixed(2)}</div></div>
    <div class="score-box"><div class="sb-label">Ph·∫ßn II</div><div class="sb-val">${p2.toFixed(2)}</div></div>
    <div class="score-box"><div class="sb-label">P1 ƒê√∫ng</div><div class="sb-val">${p1Correct}/24</div></div>
  `;

  document.getElementById('scoreDetail').innerHTML =
    `T·ªïng ƒëi·ªÉm: <strong>${total.toFixed(2)}</strong>/10 &nbsp;|&nbsp; Thang ƒëi·ªÉm 10`;

  document.getElementById('resultModal').classList.add('show');
}

function reviewAnswers() {
  document.getElementById('resultModal').classList.remove('show');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function retryExam() {
  document.getElementById('resultModal').classList.remove('show');
  initExam();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ============================================================
// INIT
// ============================================================
window.onload = function() {
  initExam();
};
</script>
</body>
</html>
